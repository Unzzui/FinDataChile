<div align="center">

# FinData Chile

**Inteligencia Financiera Accesible y Accionable para el Mercado Chileno**  
Datos hist√≥ricos estructurados de empresas chilenas listos para an√°lisis, modelos y decisiones r√°pidas.

</div>

## üß† Resumen Ejecutivo

FinData Chile concentra, normaliza y distribuye estados financieros hist√≥ricos de empresas chilenas en un formato consistente, listo para uso inmediato (Excel estructurado / futuro API). Ahorra horas de recopilaci√≥n manual, reduce errores y acelera la toma de decisiones para analistas, inversionistas, consultores y equipos de corporate finance.

## ÔøΩ Propuesta de Valor

| Necesidad del Cliente                | C√≥mo lo Resuelve FinData Chile                                      | Beneficio Tangible                       |
| ------------------------------------ | ------------------------------------------------------------------- | ---------------------------------------- |
| Datos dispersos / desordenados       | Curaci√≥n + estandarizaci√≥n multi-sector                             | Menos preparaci√≥n previa (‚àí70% tiempo)   |
| Retrasos en actualizaci√≥n            | Pipeline y jobs de scraping estructurados                           | Acceso temprano a datos recientes        |
| Formatos inconsistentes              | Excel multi-hojas normalizado (Resultados, Balance, Flujo, Resumen) | Integraci√≥n directa a modelos existentes |
| Validaci√≥n manual de compra / acceso | Control de derechos por transacci√≥n / suscripci√≥n                   | Seguridad y cumplimiento                 |
| Escalabilidad futura                 | Arquitectura modular (scraping, ETL, API)                           | Roadmap claro a API y dashboards         |

## üß© El Problema

Recolectar y estructurar estados financieros en Chile implica: buscar en m√∫ltiples fuentes (CMF, reportes PDF, sitios corporativos), limpiar datos y homogeneizar criterios contables. Estos pasos consumen recursos y generan fricci√≥n para equipos que deber√≠an enfocarse en interpretar, no formatear.

## ‚úÖ La Soluci√≥n

Una plataforma centralizada con: cat√°logo navegable, descarga segura, pagos locales (Transbank), planes de suscripci√≥n y base t√©cnica preparada para automatizar ingreso de nuevas series y m√©tricas.

## üë• ¬øPara Qui√©n?

- Inversionistas retail y semi-profesionales.
- Family offices y gestores de portafolio.
- Consultoras financieras / boutiques M&A.
- Startups Fintech que requieren datasets estructurados.
- Universidades y laboratorios de investigaci√≥n aplicada.

## üîç Casos de Uso Clave

| Caso                                                     | Resultado                                          |
| -------------------------------------------------------- | -------------------------------------------------- |
| Modelos de valoraci√≥n (DCF / comparables)                | Inputs limpios y consistentes por empresa / sector |
| Construcci√≥n de dashboards (Power BI / Looker / Tableau) | Excel directo a importaci√≥n / futuras APIs         |
| Screening sectorial r√°pido                               | Filtros por sector, rango de a√±os, tipo de dato    |
| Backtesting estrategias                                  | Series hist√≥ricas ordenadas por trimestre / a√±o    |
| Preparaci√≥n de due diligence                             | Consolidaci√≥n multifuente en minutos               |

## ‚öôÔ∏è Beneficios Clave

- Tiempo de preparaci√≥n ‚Üí an√°lisis (en vez de limpieza).
- Datos estructurados que minimizan errores humanos.
- Integraci√≥n natural con procesos existentes (Excel primero, API despu√©s).
- Escalable a m√©tricas derivadas (m√°rgenes, ratios, growth, volatilidad).
- Dise√±o pensado para compliance y control de acceso.

## ü•á Diferenciadores

| FinData Chile                           | Alternativas Manuales  | Otras Fuentes Gen√©ricas              |
| --------------------------------------- | ---------------------- | ------------------------------------ |
| Foco local profundo (empresas Chilenas) | Alto esfuerzo personal | Menor resoluci√≥n / cobertura parcial |
| Pagos WebPay (confianza mercado local)  | No aplica              | Tarjetas internacionales / fricci√≥n  |
| Estructura consistente multi-sector     | Inconsistente          | Normalizaci√≥n limitada               |
| Roadmap API + dashboards                | No escalable           | Roadmap no focalizado regionalmente  |
| Control de derechos por compra          | Riesgo compartido      | Accesos amplios / sin granularidad   |

## üíº Modelo de Negocio

1. Venta puntual de datasets (Excel por empresa / rango de a√±os).
2. Suscripciones (mensual / trimestral / anual) con acceso a m√∫ltiples empresas y actualizaciones peri√≥dicas.
3. Futuro: API premium, paquetes sectoriales, m√©tricas derivadas, alertas y monitoreo.

## üìà M√©tricas que Importan (KPIs Objetivo Inicial)

- Tasa de conversi√≥n visita ‚Üí primera descarga.
- Tiempo medio entre compra y segunda compra (retenci√≥n).
- % usuarios que migran a suscripci√≥n luego de 2+ compras.
- Latencia de actualizaci√≥n: diferencia entre publicaci√≥n oficial y disponibilidad en plataforma.

## üöÄ Estado Actual (MVP T√©cnico Listo)

- Cat√°logo navegable y filtrable.
- Descarga segura controlada por compra validada.
- Pagos con Transbank en modo integraci√≥n listo para pasar a producci√≥n.
- Infraestructura de scraping y generaci√≥n de Excels preparada (simulada / acoplable a fuentes reales CMF).
- Suscripciones definidas a nivel de modelo (f√°cil activaci√≥n de l√≥gica recurrente).

## üõ§Ô∏è Roadmap Comercial Corto Plazo

| Fase | Objetivo           | Entregable                          |
| ---- | ------------------ | ----------------------------------- |
| 1    | Validaci√≥n mercado | 50 clientes de compra √∫nica         |
| 2    | Activar retenci√≥n  | Conversi√≥n 25% a plan mensual       |
| 3    | Escalar producto   | API p√∫blica (lectura)               |
| 4    | Profundizar valor  | Dashboards comparativos sectoriales |
| 5    | Expansi√≥n          | Integraci√≥n m√©tricas ESG / riesgo   |

## üì£ Llamado a la Acci√≥n

¬øNecesitas bases financieras limpias y listas hoy?

1. Explora el cat√°logo.
2. Agrega empresas al carrito.
3. Paga con WebPay y descarga en segundos.
4. Escala a un plan si necesitas actualizaci√≥n continua.

Contacto comercial: (agregar email / formulario)

---

# üõ† Gu√≠a T√©cnica (Para Desarrolladores / Operaciones)

## Tecnolog√≠as Base

Next.js 15 ¬∑ React 19 ¬∑ TypeScript ¬∑ Tailwind ¬∑ Radix UI ¬∑ Postgres ¬∑ Transbank SDK ¬∑ XLSX ¬∑ Arquitectura modular para scraping / ETL.

## Arquitectura (Resumen)

| Capa                 | Descripci√≥n                                                                                              |
| -------------------- | -------------------------------------------------------------------------------------------------------- |
| Next.js (App Router) | Pages p√∫blicas, panel admin, endpoints API serverless.                                                   |
| Base de Datos        | Postgres (users, products, cart_items, purchases, download_history, transactions, transaction_products). |
| Archivos             | `public/excel-products`, `storage/`, Vercel Blob (tokens).                                               |
| Autenticaci√≥n        | JWT custom admin + user (HMAC).                                                                          |
| Pagos                | WebPay Plus (transbank-sdk).                                                                             |
| Datos                | Generaci√≥n Excel + pipeline scraping escalable.                                                          |

## Estructura Relevante

```
app/
  page.tsx                Landing / cat√°logo
  api/                    Endpoints (productos, pago, carrito, descargas, auth)
components/               UI y m√≥dulos de panel / ecommerce
lib/                      L√≥gica de negocio, BD, scraping, auth, pagos
public/excel-products/    Archivos Excel servidos
scripts/                  Utilidades (check-env, setup vercel)
storage/                  Archivos subidos / pagados (modo local)
```

## Variables de Entorno (Resumen)

```
ADMIN_USERNAME=...
ADMIN_PASSWORD=...
ADMIN_JWT_SECRET=...
USER_JWT_SECRET=...
JWT_SECRET=...
NEXTAUTH_SECRET=...
NEXTAUTH_URL=http://localhost:3000
PGHOST=...
PGPORT=5432
PGDATABASE=...
PGUSER=...
PGPASSWORD=...
TRANSBANK_COMMERCE_CODE=...
TRANSBANK_API_KEY=...
TRANSBANK_ENVIRONMENT=integration
NEXT_PUBLIC_BASE_URL=http://localhost:3000
STORAGE_ROOT=./storage
BLOB_READ_WRITE_TOKEN=...
```

Recomendaciones: Secrets largos; separar ambientes; rotaci√≥n peri√≥dica.

## Base de Datos (Operaciones)

Funciones clave: `createUser`, `addToCart`, `createPurchase`, `recordDownload`, `canUserDownload`, `upsertProduct`.

## Pago (WebPay) Flujo

1. `POST /api/payment/initiate`
2. Generaci√≥n `buyOrder` + `sessionId`
3. Creaci√≥n transacci√≥n ‚Üí Redirecci√≥n WebPay
4. Retorno ‚Üí Validaci√≥n / marcado `completed`
5. Descarga habilitada

## Carrito

Endpoints: `/api/cart/add`, `/api/cart/remove`, `/api/cart/items`, `/api/cart/clear`.  
Guests ‚Üí cookie `guestId`; usuarios ‚Üí `userToken`.

## Productos

`GET /api/products` (param `showAll=true` para admin). Transformaci√≥n snake_case‚ÜícamelCase en capa API.

## Scraping & Excel

`scraping-workflow.ts` (jobs + raw + procesado) y `excel-generator.ts` (workbook estandarizado).

## Scripts

| Script           | Descripci√≥n        |
| ---------------- | ------------------ |
| `pnpm dev`       | Desarrollo local   |
| `pnpm build`     | Build producci√≥n   |
| `pnpm start`     | Servir build       |
| `pnpm check-env` | Validaci√≥n entorno |

## Puesta en Marcha Local

```bash
cp env.example .env.local
pnpm install
# Crear / migrar BD
pnpm dev
```

Abrir: http://localhost:3000

## Descargas Seguras

Control por tabla `purchases` (status `completed`) + validaci√≥n `canUserDownload`.

## Suscripciones

Definidas en `product-management.ts`; extender a cron / webhooks para cobrar y actualizar.

## Seguridad

- No exponer secrets en cliente.
- Cookies SameSite=Lax.
- Validar inputs (recomendado zod adicional).
- Rotaci√≥n secrets.

## Licencia

Derechos Reservados ¬© FinData Chile. Uso interno / propietario.

## Contacto

Agregar email / canal para acuerdos comerciales, soporte t√©cnico y formatos personalizados.

---

Este documento mezcla visi√≥n comercial y gu√≠a t√©cnica. Ajustar narrativa seg√∫n p√∫blico (inversionistas, clientes, socios).
